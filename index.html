<!DOCTYPE html>
<html>

<head>
  <!-- links
  -->
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <script src="https://pay.payphonetodoesposible.com/api/button/js?appId=wJX3diisNUaiqOaDpOv2Ng"></script>
  <script>
    let token = "9_Mo03EsZ-yvY0tAe6Ge59-IXicmX5ebdGuU7SU7Psp5Ndu9murey5ZYdniN7qRxHFRatMqSYnwNdzEUGSZUCipQM5iGTNYmphtLV69ioYKldLBk0c3lhO2eaeNqOWKz6oeVK3MVEIgkPLflbYDvlgNQT2P5ViL38K36Qiyccx4pLbSw6EIw1ADWzIbIP2ivJfj9ZB1-72JGsryRDNOp6u0MbIHUbjhNPCgTmcW0KuCM9cYj3vwhO6cM87OZghu3q4b3hzeNzHi7Yj7M5zuFrQztVJNcfatAa3tDy3lwCvJcAnC2KMVvtExXUNGmaJmPruBLCAGjrQVBxu0E4r6HzrN2Uy0";

    let responseUrl = "https://desarrollotimospro.github.io/pruebapayphone/";
    let cancellationUrl = "https://desarrollotimospro.github.io/pruebapayphone/";
  </script>

  <!-- definicion de variables
  -->
  <script>
    //let costo_por_licencia = 120;
    let transacionid;
    let ivaEcuador = .12;
    let amount, amountWithoutTax, amountWithTax, tax, service, tip = 0;
    amount = parseInt(112);
    amountWithTax = parseInt(100);
    tax = parseInt(12);
    let currency, clientTransactionId, storeId, reference, phoneNumber, email, documentId;
    const cantidades_productos = [];
    const totales_productos = [];
    const productos = [{
      name: 'Licencias',
      valor: 120,
      cantidad: 3,
    }/*, {
      name: 'LicenciasPro',
      valor: 240,
      cantidad: 1
    }, {
      name: 'Licenciasbeta',
      valor: 60,
      cantidad: 2
    }*/]

  </script>
  <!-- contador y boton pagar
  -->
  <script>
    transaccionid = Date.now() + "CLientTimos";

    if (amount == undefined) {
      amount = parseInt(112);
      amountWithTax = parseInt(100);
      tax = parseInt(12);
    }
    window.onload = function () {
      payphone.Button({
        token: token,
        btnHorizontal: true,
        btnCard: true,
        createOrder: function (actions) {
          return actions.prepare({
            amount: amount,
            amountWithTax: amountWithTax,
            tax: tax,
            currency: "USD",
            clientTransactionId: transaccionid,
            responseUrl: responseUrl,
            cancellationUrl: cancellationUrl
          });

        },
        onComplete: function (model, actions) {

          //Se confirma el pago realizado
          actions.confirm({
            id: model.id,
            clientTxId: model.clientTxId
          }).then(function (value) {

            //EN ESTA SECCIÓN SE PROCESA LA RESPUESTA CON LOS DATOS DE RESPUESTA
            if (value.statusCode == 3) {
              alert('Orden# ' + value.clientTransactionId +
                '\n Codigo de Autorización : ' + value.authorizationCode +
                '\n Moneda :' + value.currency +
                '\n Monto Total : $' + (value.amount / 100).toFixed(2) +
                '\n Referencia : ' + value.reference +
                '\n Medio de Pago : ' + value.cardBrand +
                '\n Id Transaccion :' + value.transactionId +
                '\n Estado :' + value.transactionStatus
              );
              location.reload();
            } else {
              alert('Orden# ' + value.clientTransactionId +
                '\n Codigo de Autorización : ' + value.authorizationCode +
                '\n Moneda :' + value.currency +
                '\n Monto Total : $' + (value.amount / 100).toFixed(2) +
                '\n Referencia : ' + value.reference +
                '\n Medio de Pago : ' + value.cardBrand +
                '\n Id Transaccion : ' + value.transactionId +
                '\n Estado : ' + value.transactionStatus +
                '\n Hubo un problema su transaccion fue : ' + value.message
              );
              location.reload();
            }
          }).catch(function (err) {
            alert(err);
            location.reload();
            console.log(err);
          });

        }
      }).render('#pp-button');

    }
  </script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Pasarela de Pagos Payphone</title>
  <!-- **********************   Apartado del CSS   *********************************
  -->
  <style type="text/css">
    body {
      color: black;
      background-color: white;
    }

    #proforma {
      display: grid;
      grid-template-columns: auto auto auto;
    }

    #Totales1 {
      font-size: 85%;
      margin: 5%;
    }

    #Totales2 {
      font-size: 85%;
      margin: 5%;
    }

    #Totales3 {
      font-size: 85%;
      margin: 5%;
    }

    #RedireccionamientoPayphone button {
      display: block;
      margin: auto;
      margin-top: 5%;
      width: 35%;
      border: 1px solid rgb(243, 128, 6);
      background: orange;
      text-align: center;
      padding: 5px;
      border-radius: 8px;
      color: papayawhip;
    }

    #pp-button {
      display: block;
      margin: auto;
      margin-top: 2%;
      width: 35%;
    }

    .botonesgrill {
      width: 75%;
      display: block;
      margin: 5%;

      /*margin: 20%;*/
      /*margin-top: auto; */
      display: grid;
      grid-template-columns: auto auto;
    }

    .botonesgrill button {
      background-color: #B0E0E6;
      border: 1px solid #ADD8E6;
      color: white;
      cursor: pointer;
      display: block;
      font-weight: 700;
      font-size: 25px;
    }

    .botonesgrill button:not(:last-child) {
      border-bottom: none;
    }

    .botonesgrill button:hover {
      background-color: #87CEFA;
    }

    .boton {
      display: grid;
      width: 50%;
      grid-template-rows: auto auto;
    }

    .boton button {
      background-color: #5cc171;
      border: 1px solid #000000;
      color: white;
      cursor: pointer;
      display: block;
      font-weight: 700;
      font-size: 25px;
    }

    .boton button:not(:last-child) {
      border-bottom: none;
    }

    .boton button:hover {
      background-color: #3e8e41;
    }


    .logo {
      grid-area: logo;
    }

    .logo svg {
      width: 30%;
      /*display: block;*/
      /*margin: auto;*/
    }

    .producto {
      grid-area: prod;
    }

    .valorUnitario {
      grid-area: val_u;
    }

    .cantidades {
      grid-area: cant;
    }

    .totales {
      grid-area: total;
    }

    .totalSiniva {
      grid-area: siniva;
    }

    0totalsinivaclass {
      grid-area: sinivaValor;
    }

    .totalivaclass {
      grid-area: ivaValor;
    }

    .totalconivaclass {
      grid-area: conivaValor;
    }

    .iva {
      grid-area: iva;
    }

    .totalConiva {
      grid-area: coniva;
    }

    .Botonesincremento {
      grid-area: bot;
    }

    .grid-container {
      display: grid;
      grid-template-areas:
        'logo logo logo logo logo logo'
        'prod prod val_u cant bot total'
        'prod prod val_u cant bot  total'
        'prod prod val_u cant bot  total'
        'siniva siniva siniva siniva siniva sinivaValor'
        'iva iva iva iva iva ivaValor'
        'coniva coniva coniva coniva coniva conivaValor';
      gap: 5px;
      background-color: #2196F3;
      padding: 5px;
    }

    .grid-container>div {
      background-color: rgba(255, 255, 255, 0.8);
      text-align: center;
      /*padding: 20px 0;*/
      /*font-size: 200%;/*30px;*/
    }
  </style>
  <!-- **********************   Fin Apartado del CSS   *********************************
  -->
</head>


<body>

  <div class="grid-container">

    <div class="logo">
      <svg preserveAspectRatio="xMidYMid meet" data-bbox="-0.001 0 646.441 280.684" viewBox="0 0 646.45 281.17"
        data-type="ugc" role="img" aria-labelledby="svgcid-imgb6u-83uall">
        <title id="svgcid-imgb6u-83uall">Acelerador de negocios</title>
        <g>
          <defs>
            <linearGradient gradientUnits="userSpaceOnUse" y2="187.03" x2="206.54" y1="187.03" x1="185.12"
              id="svgcid--dxpgzj9n5kzu">
              <stop stop-color="#009ee2" offset=".25"></stop>
              <stop stop-color="#0069b3" offset="1"></stop>
            </linearGradient>
            <linearGradient gradientUnits="userSpaceOnUse" y2="187.03" x2="314.32" y1="187.03" x1="228.63"
              id="svgcid-alcz0h-rt7kvr">
              <stop stop-color="#0069b3" offset="0"></stop>
              <stop stop-color="#009ee2" offset=".75"></stop>
            </linearGradient>
            <linearGradient xlink:href="#svgcid-alcz0h-rt7kvr" y2="187.03" x2="378.61" y1="187.03" x1="292.9"
              id="svgcid--y8hnbz5lvrk">
            </linearGradient>
            <linearGradient gradientUnits="userSpaceOnUse" y2="108.7" x2="298.25" y1="108.7" x1="126.5"
              id="svgcid-fy5smk-t3uq11">
              <stop stop-color="#0069b3" offset="0"></stop>
              <stop stop-color="#009ee2" offset=".5"></stop>
              <stop stop-color="#0069b3" offset="1"></stop>
            </linearGradient>
          </defs>
          <g>
            <path
              d="M612.13 175.29h-49.24a12.89 12.89 0 1 1 0-25.77h72.84a10.72 10.72 0 0 0 0-21.43h-72.84a34.32 34.32 0 0 0 0 68.63h49.24a12.89 12.89 0 1 1 0 25.77h-72.84a10.71 10.71 0 1 0 0 21.42h72.84a34.31 34.31 0 0 0 34.31-34.31 34.31 34.31 0 0 0-34.31-34.31z"
              fill="#f29222"></path>
            <path
              d="M453.59 117.38a64.28 64.28 0 0 0-64.27 64.28 64.28 64.28 0 0 0 128.55 0 64.28 64.28 0 0 0-64.28-64.28zm42.85 64.31a42.85 42.85 0 0 1-85.7 0 42.85 42.85 0 0 1 85.7 0z"
              fill="#f29222"></path>
            <path
              d="m194.18 258.92-6.76 16.82H189l1.71-4.29h8.34l1.7 4.29h1.59l-6.75-16.82zm-2.92 11.16 3.63-9.19 3.62 9.19z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M218.46 264.51a4.59 4.59 0 0 1 4.07 2.35l1.14-.64a5.88 5.88 0 0 0-5.26-3 6.4 6.4 0 0 0 0 12.8 5.88 5.88 0 0 0 5.26-3l-1.14-.64a4.59 4.59 0 0 1-4.07 2.35 5.07 5.07 0 0 1 0-10.14z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M240.75 263.18a6.4 6.4 0 0 0 .16 12.8 6.19 6.19 0 0 0 4.83-2.16L245 273a5.1 5.1 0 0 1-3.91 1.66 4.82 4.82 0 0 1-5.05-4.6h10.59c.37-4.6-2.76-6.88-5.88-6.88zm-4.75 5.76a4.66 4.66 0 0 1 4.72-4.48 4.42 4.42 0 0 1 4.57 4.48z"
              fill="#000000" stroke="#000000"></path>
            <path fill="#000000" stroke="#000000" d="M259.95 258.92v16.82h-1.44v-16.82h1.44z"></path>
            <path
              d="M277.91 263.18a6.4 6.4 0 0 0 .17 12.8 6.19 6.19 0 0 0 4.83-2.16l-.76-.78a5.09 5.09 0 0 1-3.91 1.66 4.81 4.81 0 0 1-5-4.6h10.59c.36-4.64-2.83-6.92-5.92-6.92zm-4.71 5.76a4.65 4.65 0 0 1 4.71-4.48 4.41 4.41 0 0 1 4.57 4.48z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M297.12 266.29v-2.87h-1.44v12.32h1.44v-6.54c0-2.89 1.78-4.67 4-4.67a2.63 2.63 0 0 1 .61.07v-1.34a2.08 2.08 0 0 0-.64-.08 4 4 0 0 0-3.97 3.11z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M323.79 266.05h-.07a5.34 5.34 0 0 0-4.93-2.87 6.41 6.41 0 0 0 0 12.8 5.34 5.34 0 0 0 4.93-2.87h.07v2.63h1.45v-12.32h-1.45zm-4.81 8.6a5.07 5.07 0 1 1 4.86-5.07 4.75 4.75 0 0 1-4.84 5.07z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M348.22 266.05h-.07a5.35 5.35 0 0 0-4.93-2.87 6.41 6.41 0 0 0 0 12.8 5.35 5.35 0 0 0 4.93-2.87h.07v2.63h1.45v-16.82h-1.45zm-4.81 8.6a5.07 5.07 0 1 1 4.86-5.07 4.75 4.75 0 0 1-4.86 5.07z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M367.88 263.18a6.4 6.4 0 1 0 6.35 6.4 6.22 6.22 0 0 0-6.35-6.4zm0 11.47a5.07 5.07 0 1 1 4.91-5.07 4.83 4.83 0 0 1-4.91 5.07z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M387.54 266.29v-2.87h-1.44v12.32h1.44v-6.54c0-2.89 1.78-4.67 4-4.67a2.72 2.72 0 0 1 .62.07v-1.34a2.17 2.17 0 0 0-.64-.08 4 4 0 0 0-3.98 3.11z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M428.74 266.05h-.07a5.35 5.35 0 0 0-4.93-2.87 6.41 6.41 0 0 0 0 12.8 5.35 5.35 0 0 0 4.93-2.87h.07v2.63h1.44v-16.82h-1.44zm-4.81 8.6a5.07 5.07 0 1 1 4.86-5.07 4.75 4.75 0 0 1-4.86 5.07z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M448.14 263.18a6.4 6.4 0 0 0 .16 12.8 6.23 6.23 0 0 0 4.84-2.16l-.76-.78a5.1 5.1 0 0 1-3.91 1.66 4.82 4.82 0 0 1-5.05-4.6H454c.41-4.64-2.74-6.92-5.86-6.92zm-4.72 5.76a4.66 4.66 0 0 1 4.72-4.48 4.42 4.42 0 0 1 4.57 4.48z"
              fill="#000000" stroke="#000000"></path>
            <path fill="#000000" stroke="#000000"
              d="M492.38 273.25h-.11l-10.21-14.33h-1.52v16.82h1.47v-14.33h.12l10.21 14.33h1.51v-16.82h-1.47v14.33z">
            </path>
            <path
              d="M511.81 263.18A6.4 6.4 0 0 0 512 276a6.23 6.23 0 0 0 4.84-2.16l-.76-.78a5.1 5.1 0 0 1-3.91 1.66 4.82 4.82 0 0 1-5.05-4.6h10.59c.37-4.66-2.78-6.94-5.9-6.94zm-4.72 5.76a4.66 4.66 0 0 1 4.72-4.48 4.42 4.42 0 0 1 4.57 4.48z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M540.09 266.05H540a5.35 5.35 0 0 0-4.93-2.87 6.41 6.41 0 0 0 0 12.8 5.35 5.35 0 0 0 4.93-2.87h.09v2c0 3.22-2.37 4.31-4.83 4.31a6.35 6.35 0 0 1-3.46-.9v1.28a6.89 6.89 0 0 0 3.62.88c2.89 0 6.12-1.33 6.12-5.5v-11.76h-1.45zm-4.83 8.6a5.07 5.07 0 1 1 4.88-5.07 4.75 4.75 0 0 1-4.88 5.07z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M559.75 263.18a6.4 6.4 0 1 0 6.35 6.4 6.23 6.23 0 0 0-6.35-6.4zm0 11.47a5.07 5.07 0 1 1 4.91-5.07 4.83 4.83 0 0 1-4.91 5.07z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="M583.75 264.51a4.59 4.59 0 0 1 4.07 2.35l1.14-.64a5.88 5.88 0 0 0-5.26-3 6.4 6.4 0 0 0 0 12.8 5.88 5.88 0 0 0 5.26-3l-1.14-.64a4.59 4.59 0 0 1-4.07 2.35 5.07 5.07 0 0 1 0-10.14z"
              fill="#000000" stroke="#000000"></path>
            <path fill="#000000" stroke="#000000" d="M602.27 263.42v12.32h-1.44v-12.32h1.44z"></path>
            <path fill="#000000" stroke="#000000" d="M602.27 258.92v1.4h-1.44v-1.4h1.44z"></path>
            <path
              d="M620.49 263.18a6.4 6.4 0 1 0 6.34 6.4 6.22 6.22 0 0 0-6.34-6.4zm0 11.47a5.07 5.07 0 1 1 4.9-5.07 4.84 4.84 0 0 1-4.9 5.07z"
              fill="#000000" stroke="#000000"></path>
            <path
              d="m642.49 268.82-.83-.33c-1.44-.59-2-1.3-2-2.23 0-1.23 1-1.84 2.2-1.84a2.47 2.47 0 0 1 2.47 1.73l1.16-.38a3.6 3.6 0 0 0-3.68-2.59c-2 0-3.57 1.26-3.57 3.08 0 1.35.83 2.54 2.86 3.37l.95.38c1.61.68 2.47 1.25 2.47 2.51 0 1.54-1.33 2.2-2.66 2.2a2.92 2.92 0 0 1-3-2.37l-1.25.36a4 4 0 0 0 4.21 3.27c2 0 4.1-1.07 4.1-3.46.08-1.99-1.3-2.82-3.43-3.7z"
              fill="#000000" stroke="#000000"></path>
            <path d="m197 51.81 22.1-24.47a136.28 136.28 0 0 0-53.28-24.28L159 34.69a105.15 105.15 0 0 1 38 17.12z"
              fill="#90c83f"></path>
            <path d="m48.1 32.75 19.81 23.71a105.47 105.47 0 0 1 36.88-19.88L96.76 6A136.67 136.67 0 0 0 48.1 32.75z"
              fill="#1c74bd"></path>
            <path
              d="M137 0a137.08 137.08 0 0 0-35 4.51l7.47 30.77a106.54 106.54 0 0 1 44.73-1.56L160.43 2A137.38 137.38 0 0 0 137 0z"
              fill="#1c74bd"></path>
            <path d="m17.68 69.63 26 15.64a106.21 106.21 0 0 1 20.53-25.6L44 36.39a137.57 137.57 0 0 0-26.32 33.24z"
              fill="#1c74bd"></path>
            <path d="m223.45 30.76-22.53 24a106.19 106.19 0 0 1 19.25 19.8h38.77a137.55 137.55 0 0 0-35.49-43.8z"
              fill="#7da32b"></path>
            <path
              d="M29.78 137.73a107.93 107.93 0 0 1 .59-11.15l-29.4-6A137.6 137.6 0 0 0 .83 152l29.71-1.61a106 106 0 0 1-.76-12.66z"
              fill="#2b95e1"></path>
            <path d="m41.35 89.61-26.3-15.13a135.92 135.92 0 0 0-13.3 40.63L31 121.62a105 105 0 0 1 10.35-32.01z"
              fill="#2b95e1"></path>
            <path d="M1.55 157.56a136 136 0 0 0 8.39 30.7L38 178.72a104.16 104.16 0 0 1-6.77-23.34z" fill="#2b95e1">
            </path>
            <path
              d="M206.54 138.81v96.44A10.71 10.71 0 0 1 195.83 246a10.71 10.71 0 0 1-10.71-10.71v-96.48a10.71 10.71 0 0 1 10.71-10.72 10.71 10.71 0 0 1 10.71 10.72z"
              fill="url(#svgcid--dxpgzj9n5kzu)"></path>
            <path
              d="M228.63 170.94v64.31A10.71 10.71 0 0 0 239.34 246a10.72 10.72 0 0 0 10.71-10.71v-64.35a21.42 21.42 0 0 1 21.42-21.42 21.42 21.42 0 0 1 21.43 21.42v64.31A10.72 10.72 0 0 0 303.61 246a10.71 10.71 0 0 0 10.71-10.71v-64.35a42.85 42.85 0 0 0-42.85-42.85 42.85 42.85 0 0 0-42.84 42.85z"
              fill="url(#svgcid-alcz0h-rt7kvr)"></path>
            <path
              d="M292.9 170.94v64.31A10.72 10.72 0 0 0 303.61 246a10.71 10.71 0 0 0 10.71-10.71v-64.35a21.43 21.43 0 0 1 21.43-21.42 21.43 21.43 0 0 1 21.43 21.42v64.31A10.72 10.72 0 0 0 367.89 246a10.72 10.72 0 0 0 10.72-10.71v-64.35a42.86 42.86 0 0 0-42.86-42.85 42.85 42.85 0 0 0-42.85 42.85z"
              fill="url(#svgcid--y8hnbz5lvrk)"></path>
            <path
              d="M262.43 80.25v-.06h-98.6a36.6 36.6 0 0 0-33.24 21 36 36 0 0 1 32.7 36v-12.46c0-9.87 8.6-9.86 8.6-9.86H240c17.78 0 22.4-11.88 23.44-19.41.63-4.72-.25-11.04-1.01-15.21z"
              fill="url(#svgcid-fy5smk-t3uq11)"></path>
            <path d="m40.11 183.34-28 10.1a136.86 136.86 0 0 0 15 25.44l24.54-16.78a106.4 106.4 0 0 1-11.54-18.76z"
              fill="#2ba9e1"></path>
            <path d="M74 223.72 54 246a137.8 137.8 0 0 0 20.58 13l15.31-25.9A105.82 105.82 0 0 1 74 223.72z"
              fill="#2ba9e1"></path>
            <path
              d="m54.86 206.06-24.19 17.27a137.36 137.36 0 0 0 18.89 19.08l20.38-21.77a106.08 106.08 0 0 1-15.08-14.58z"
              fill="#2ba9e1"></path>
            <path d="m94.58 235.2-14.87 26.22a135.79 135.79 0 0 0 22.45 8l12.62-28.06a104.84 104.84 0 0 1-20.2-6.16z"
              fill="#2ba9e1"></path>
            <path
              d="M163 240c.08 0 0-.07.13-.1a42.34 42.34 0 0 0 .21-6.54v-96.14a36.22 36.22 0 0 0-32.8-36.13h.13c-1.1-.1-2-.2-3.1-.2H44.22s-3.27 6.34-5.13 18.71a88.3 88.3 0 0 0-1.27 15.34l79.42-.13s6.91-.4 9.4 3.66c1.94 3.15 2.92 7.13 2.87 17.47 0 0 .83 31.12.43 56.87-.23 14.4-.69 26.72-2 29.88l-.16.45h-.76c-2.58-.2-5.14-.49-7.66-.88l-12.11 28.51c0 .23 3.73.77 3.73.77a140.4 140.4 0 0 0 22.24 2.37c22.29-2.76 28.51-22.37 30.07-34z"
              fill="#2ba9e1"></path>
          </g>
        </g>
      </svg>
    </div>

    <div class="producto">
      <section id="profuctos"></section>
    </div>

    <div class="valorUnitario">
      <section id="valores"></section>
    </div>


    <div class="cantidades">
      <section id="cantidades"></section>
    </div>

    <div class="totales">
      <section id="totales"></section>
    </div>

    <div class="Botonesincremento">
      <section id="botonesmasmenos"></section>
    </div>

    <div class="totalSiniva">
      Total sin iva
    </div>
    <div class="iva">
      valor del iva al 12%
    </div>
    <div class="totalConiva">
      total a Cancelar
    </div>

    <div class="totalsinivaclass">
      <section id="totalsinivaselect"></section>
    </div>
    <div class="totalivaclass">
      <section id="totalivaselect"></section>
    </div>
    <div class="totalconivaclass">
      <section id="totalconivaselect"></section>
    </div>
  </div>

  <section id="RedireccionamientoPayphone">
    <button onclick='buttomPrepare()'>Pagar Con Payphone</button>
  </section>

  <div id="pp-button"></div>

</body>


<!-- **********************   Apartado del JS   *********************************
  -->




<script>

  function buttomPrepare() {

    transaccionid = Date.now() + "CLientTimos";//creo un id de transaccion random
    console.log(transaccionid);

    var dataJson = {
      amount: amount,
      amountWithTax: amountWithTax,
      tax: tax,
      currency: "USD",
      clientTransactionId: transaccionid,
      responseUrl: responseUrl,
      cancellationUrl: cancellationUrl
    };
    console.log(dataJson);
    $.ajax({
      data: dataJson,
      url: 'https://pay.payphonetodoesposible.com/api/button/Prepare',
      type: 'POST',
      beforeSend: function (xhr) {
        xhr.setRequestHeader('Authorization', 'bearer ' + token)
      },
      success: function SolicitarPago(respuesta) {
        location.href = respuesta.payWithCard;
      }, error: function (respuesta) {
        alert("error en la llamada:" + JSON.stringify(respuesta));
      }
    });
  }

  /*function RedireccionamientoPayphone() {
    console.log("En construccion");
  }*/
</script>

<script>

  function actdesglose() {

    document.getElementById('totalsiniva').innerHTML = +(((totales_productos.reduce((a, b) => a + b, 0))).toFixed(2));
    document.getElementById('totaliva').innerHTML = +(((totales_productos.reduce((a, b) => a + b, 0)) * ivaEcuador).toFixed(2));
    document.getElementById('totalconiva').innerHTML = +(((totales_productos.reduce((a, b) => a + b, 0)) + ((totales_productos.reduce((a, b) => a + b, 0)) * ivaEcuador)).toFixed(2));
    //amount,amountWithTax,tax=parceInt(0);

    amountWithTax = (+(((totales_productos.reduce((a, b) => a + b, 0))).toFixed(2))) * 100;
    tax = (+(((totales_productos.reduce((a, b) => a + b, 0)) * ivaEcuador).toFixed(2))) * 100;
    amount = (+(((totales_productos.reduce((a, b) => a + b, 0)) + ((totales_productos.reduce((a, b) => a + b, 0)) * ivaEcuador)).toFixed(2))) * 100;
    //console.log(amount);console.log(amountWithTax);console.log(tax);
  }

  function desglose(select1, select2, select3) {
    let sel1 = document.querySelector(select1);
    let sel2 = document.querySelector(select2);
    let sel3 = document.querySelector(select3);
    let p1 = document.createElement("p");
    let p2 = document.createElement("p");
    let p3 = document.createElement("p");
    p1.id = 'totalsiniva';
    p2.id = 'totaliva';
    p3.id = 'totalconiva';
    p1.innerHTML = +(((totales_productos.reduce((a, b) => a + b, 0))).toFixed(2));
    p2.innerHTML = +(((totales_productos.reduce((a, b) => a + b, 0)) * ivaEcuador).toFixed(2));
    p3.innerHTML = +(((totales_productos.reduce((a, b) => a + b, 0)) + ((totales_productos.reduce((a, b) => a + b, 0)) * ivaEcuador)).toFixed(2));
    sel1.appendChild(p1);
    sel2.appendChild(p2);
    sel3.appendChild(p3);
    //amount,amountWithTax,tax=parceInt(0);
    amountWithTax = (+(((totales_productos.reduce((a, b) => a + b, 0))).toFixed(2))) * 100;
    tax = (+(((totales_productos.reduce((a, b) => a + b, 0)) * ivaEcuador).toFixed(2))) * 100;
    amount = (+(((totales_productos.reduce((a, b) => a + b, 0)) + ((totales_productos.reduce((a, b) => a + b, 0)) * ivaEcuador)).toFixed(2))) * 100;
    //console.log(amount);console.log(amountWithTax);console.log(tax);
  }

  function addbottones(array, select) {
    let formato = document.querySelector(select);
    let div = document.createElement("div");
    let h2 = document.createElement("h2");
    h2.innerHTML = '# de licencias';
    div.appendChild(h2);
    for (let i in array) {
      let mas = document.createElement('button');
      let menos = document.createElement('button');
      mas.id = array[i].name + '_mas';
      menos.id = array[i].name + '_menos';
      mas.innerText = '+';
      menos.innerText = '-';
      cantidades_productos.splice(i, 0, array[i].cantidad);
      totales_productos.splice(i, 0, (array[i].cantidad * array[i].valor));
      mas.addEventListener("click", function (event) {
        cantidades_productos[i]++;
        document.getElementById('Cantidad' + i).innerHTML = cantidades_productos[i];
        document.getElementById('Totales' + i).innerHTML = array[i].valor * cantidades_productos[i];
        totales_productos.splice(i, 1);
        totales_productos.splice(i, 0, (array[i].valor * cantidades_productos[i]));
        actdesglose();
      });
      menos.addEventListener("click", function (event) {
        if (cantidades_productos[i] > array[i].cantidad) {
          cantidades_productos[i]--;
          document.getElementById('Cantidad' + i).innerHTML = cantidades_productos[i];
          document.getElementById('Totales' + i).innerHTML = array[i].valor * cantidades_productos[i];
          totales_productos.splice(i, 1);
          totales_productos.splice(i, 0, (array[i].valor * cantidades_productos[i]));
          actdesglose();
        }
      });
      let divb = document.createElement("h3");
      divb.className = 'botonesgrill';
      divb.appendChild(mas);
      divb.appendChild(menos);
      div.appendChild(divb);
    }
    formato.appendChild(div);
  }

  function addobj(menu, array, categoria, select) {
    let formato = document.querySelector(select);
    let div = document.createElement("div");
    let h2 = document.createElement("h2");
    h2.innerHTML = menu;
    div.appendChild(h2);
    for (let i in array) {
      let h3 = document.createElement("h3");
      h3.innerHTML = array[i][categoria];
      div.appendChild(h3);
    }
    formato.appendChild(div);
  }

  function addlista(menu, array, select) {
    let formato = document.querySelector(select);
    let div = document.createElement("div");
    let h2 = document.createElement("h2");
    h2.innerHTML = menu;
    div.id = menu + '_div';
    div.appendChild(h2);
    for (let i in array) {
      let h3 = document.createElement("h3");
      h3.innerHTML = array[i];
      h3.id = menu + i;
      div.appendChild(h3);
    }
    formato.appendChild(div);
  }

  addbottones(productos, '#botonesmasmenos');
  addobj('Producto', productos, 'name', '#profuctos');
  addobj('Precios', productos, 'valor', '#valores');
  addlista('Cantidad', cantidades_productos, '#cantidades');
  addlista('Totales', totales_productos, '#totales');
  desglose('#totalsinivaselect', '#totalivaselect', '#totalconivaselect');

</script>
<!-- **********************   Fin Apartado del JS   *********************************
  -->

</html>

<!--
-->
